(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(e,t,n){e.exports=n(78)},46:function(e,t,n){e.exports=n(77)},51:function(e,t,n){},6:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return c}));var a="AUTH_LOGIN_USER_REQUEST",r="AUTH_LOGIN_USER_FAILURE",o="AUTH_LOGIN_USER_SUCCESS",i="AUTH_LOGOUT_USER",c="RESET_AUTH_LOGIN_USER_FAILURE"},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),i=n.n(o),c=(n(51),n(8)),s=n(11),u=n(12),l=n(14),m=n(13),p=n(15),h=n(3),d=n(16),f=n(21),g=n.n(f),v=n(10);function E(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function b(e){return e.json()}g.a.create({baseUrl:"/",withCredentials:"true",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(localStorage.getItem("token"))},xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken"}).interceptors.request.use((function(e){return e.headers={Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(localStorage.getItem("token"))},e}),(function(e){return Promise.reject(e)}));var y=n(6);function O(e,t){return localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(t)),{type:y.c,payload:{token:e,user:t}}}function A(){return{type:y.e}}function j(e,t){return localStorage.removeItem("token"),{type:y.a,payload:{status:e,statusText:t}}}function w(){return{type:y.b}}function x(){return localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("expirationDate"),{type:y.d}}var S=function(e){return function(t){setTimeout((function(){t(x())}),1e3*e)}};var k=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).renderCopyright=function(){var e=(new Date).getFullYear();return{__html:"&copy; ".concat(e," Dopejob")}},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,n=e.children,a=e.location.pathname;return r.a.createElement("div",null,a.includes("login")||a.includes("signup")?r.a.createElement("div",null):r.a.createElement("nav",{className:"navbar"},r.a.createElement(h.c,{className:"navbar__link",to:"/"},"logo"),r.a.createElement(h.c,{exact:!0,activeClassName:"navbar__link--active",className:"navbar__link",to:"/"},"Search"),t?r.a.createElement(h.c,{exact:!0,activeClassName:"navbar__link--active",className:"navbar__link",to:"/mon-compte/profil"},"Mon espace"):r.a.createElement(h.c,{exact:!0,activeClassName:"navbar__link--active",className:"navbar__link fl-r",to:"/login"},"Se connecter")),n,r.a.createElement("footer",{className:"footer"},r.a.createElement("ul",null,r.a.createElement("li",{className:"fl-l",dangerouslySetInnerHTML:this.renderCopyright()}),r.a.createElement("li",{className:"fl-l"},r.a.createElement(h.b,{to:"/legal",className:"link"},"Politique relative aux cookies, politique de confidentialit\xe9 et conditions d'utilisation")))))}}]),t}(a.Component),T=Object(d.f)(Object(c.b)((function(e){return{isAuthenticathed:!!e.auth.isAuthenticathed}}),(function(e){return{logout:function(){return e(x())}}}))(k)),C=n(19),N=n(24),_=n.n(N),I=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},n.handleChange=function(e){n.setState(Object(C.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.props.login(a,r)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.isAuthenticated&&this.props.dispatch(Object(v.push)("/mon-compte/profil"))}},{key:"componentWillUnmount",value:function(){this.props.reset()}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.isAuthenticated,a=this.state,o=a.username,i=a.password,c=null;if(this.props.statusText){var s=_()({alert:!0,"alert-danger":0===this.props.statusText.indexOf("Authentication Error"),"alert-success":0!==this.props.statusText.indexOf("Authentication Error")});c=r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:s},this.props.statusText)))}return r.a.createElement("div",{className:"container login"},r.a.createElement("h1",null,"Connexion"),r.a.createElement("div",null,c,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"email",onChange:this.handleChange,value:o,name:"username",placeholder:"E-mail"}),r.a.createElement("input",{type:"password",onChange:this.handleChange,value:i,placeholder:"Mot de passe",name:"password"}),r.a.createElement("button",{type:"submit",loading:t.toString(),disabled:t||n},"Connexion")),r.a.createElement("div",null,"Vous n\u2019\xeates pas encore membre ? ",r.a.createElement(h.b,{className:"link",to:"/signup"},"Cr\xe9ez un compte gratuitement"))))}}]),t}(a.Component),U=Object(c.b)((function(e){return{loading:e.auth.loading,isAuthenticated:e.auth.isAuthenticated,isAuthenticating:e.auth.isAuthenticating,statusText:e.auth.statusText}}),(function(e){return{login:function(t,n){return e(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/";return function(a){a(w()),g.a.post("/rest-auth/login/",{email:e,password:t}).then(E).then(b).then((function(e){a(O(e.token,e.user)),a(Object(v.push)(n))})).catch((function(e){return e&&"undefined"!==typeof e.response&&401===e.response.status?e.response.json().then((function(e){a(j(401,e.non_field_errors[0]))})):(e&&"undefined"!==typeof e.response&&e.response.status>=500?a(j(500,"A server error occurred while sending your data!")):a(j("Connection Error","An error occurred while sending your data!")),Promise.resolve())}))}}(t,n,"/mon-compte/profil"))},reset:function(){return e(A())}}}))(I),D=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password1:"",password2:""},n.handleChange=function(e){n.setState(Object(C.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.email,r=t.password1,o=t.password2;n.props.signup(a,r,o)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this.props.reset()}},{key:"render",value:function(){var e=this.props.loading,t=this.state,n=t.email,a=t.password1,o=t.password2,i=null;if(this.props.statusText){var c=_()({alert:!0,"alert-danger":0===this.props.statusText.indexOf("Authentication Error"),"alert-success":0!==this.props.statusText.indexOf("Authentication Error")});i=r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:c},this.props.statusText)))}return r.a.createElement("div",{className:"container signup"},r.a.createElement("h1",null,"Cr\xe9er un compte gratuitement"),r.a.createElement("div",null,i,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"email",onChange:this.handleChange,value:n,name:"email",placeholder:"E-mail"}),r.a.createElement("input",{type:"password",onChange:this.handleChange,value:a,placeholder:"Mot de passe",name:"password1"}),r.a.createElement("input",{type:"password",onChange:this.handleChange,value:o,placeholder:"Confirmer mot de passe",name:"password2"}),r.a.createElement("button",{type:"submit",loading:e.toString(),disabled:e},"Connexion")),r.a.createElement("div",null,"Vous avez un compte ? ",r.a.createElement(h.b,{to:"/login"},"Connectez-vous")),r.a.createElement("div",null,r.a.createElement(h.b,{to:"/"},"Mot de passe oubli\xe9 ?"))))}}]),t}(a.Component),R=Object(c.b)((function(e){return{loading:e.auth.loading,isAuthenticated:e.auth.isAuthenticated,isAuthenticating:e.auth.isAuthenticating,statusText:e.auth.statusText}}),(function(e){return{signup:function(t,n,a){return e(function(e,t,n){return function(a){a(w()),g.a.post("/rest-auth/registration/",{email:e,password1:t,password2:n}).then((function(e){var t=e.data.key,n=e.data.user,r=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("user",n),localStorage.setItem("expirationDate",r),a(O(t,n)),a(S(3600))})).catch((function(e){a(j(401,e))}))}}(t,n,a))},reset:function(){return e(A())}}}))(D);var L=function(){return r.a.createElement("div",null,"profile")};var H=function(){return r.a.createElement("div",null,"account")};var M=function(){return r.a.createElement("div",null,"search")};var F=function(){return r.a.createElement("div",null,"StaticPage")};var z=function(){return r.a.createElement("div",null,"StaticPageDetail")},G=function(){return r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/login",component:U}),r.a.createElement(d.a,{exact:!0,path:"/signup",component:R}),r.a.createElement(d.a,{exact:!0,path:"/legal",component:F}),r.a.createElement(d.a,{exact:!0,path:"/legal/:slug",component:z}),r.a.createElement(d.a,{path:"/mon-compte",render:function(e){var t=e.match.url;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{path:"".concat(t,"/"),component:H}),r.a.createElement(d.a,{path:"".concat(t,"/profil"),component:L}))}}),r.a.createElement(d.a,{exact:!0,path:"/",component:M}))},P=(n(76),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(T,this.props,r.a.createElement(G,null)))}}]),t}(a.Component)),W=Object(c.b)((function(e){return{isAuthenticathed:!!e.auth.isAuthenticated}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token"),n=localStorage.getItem("user");if(void 0===t)e(x());else{var a=new Date(localStorage.getItem("expirationDate"));a<=new Date?e(x()):(e(O(t,n)),e(S((a.getTime()-(new Date).getTime())/1e3)))}}))}}}))(P);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=n(43),J=n.n(q)()(),Y=r.a.createElement(c.a,{store:J},r.a.createElement(W,null));i.a.render(Y,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,n){"use strict";n.r(t);var a=n(44),r=n(17),o=n(10),i=n(6),c=(n(45),{token:null,userName:null,isAuthenticated:!1,isAuthenticating:!1,statusText:null,loading:!1});var s=Object(r.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.b:return Object.assign({},e,{isAuthenticating:!0,statusText:null,loading:!0});case i.c:return Object.assign({},e,{isAuthenticating:!1,isAuthenticated:!0,token:t.payload.token,userName:t.payload.user.email,statusText:"You have been successfully logged in.",loading:!1});case i.a:return Object.assign({},e,{isAuthenticating:!1,isAuthenticated:!1,token:null,userName:null,statusText:"Authentication Error: ".concat(t.payload.status," - ").concat(t.payload.statusText),loading:!1});case i.e:return Object.assign({},e,{isAuthenticated:!1,token:null,userName:null,statusText:null});case i.d:return Object.assign({},e,{isAuthenticated:!1,token:null,userName:null,statusText:"You have been successfully logged out."});default:return e}},routing:o.routerReducer});function u(e,t){var n=Object(o.routerMiddleware)(t),i=Object(r.a)(a.a,n);return Object(r.d)(s,e,i)}n.d(t,"default",(function(){return u}))}},[[46,1,2]]]);
//# sourceMappingURL=main.80672497.chunk.js.map